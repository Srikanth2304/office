package com.sc.wrb.controller;

import com.sc.wrb.dto.DraftFormDTO;
import com.sc.wrb.service.inter.DraftFormService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.util.Optional;

@RestController
@RequestMapping("/processapi/stepform")
public class DraftFormController {

    @Autowired
    DraftFormService draftFormService;

    @GetMapping("/getPartialForm")
    public DraftFormDTO getPartialForm(@RequestParam String processId, @RequestParam String stepName) {
        Optional<DraftFormDTO> dto = draftFormService.getPartialForm(processId, stepName);
        return dto.orElse(new DraftFormDTO(processId, stepName, "{}"));
    }

    @PostMapping("/savePartialForm")
    public String savePartialForm(@RequestParam String processId, @RequestParam String stepName, @RequestParam String form) {
        DraftFormDTO dto = new DraftFormDTO(processId, stepName, form);
        return draftFormService.savePartialForm(dto);
    }
}
